import{u as g,b as h,r as o,c as n,X as m,bY as p,j as e,D as d,e as f,bZ as b,f as j,b_ as N,b$ as y}from"./index-DKY2NX35.js";import{c as S}from"./chunk-MW56SEHC-B-JqqJfx.js";const C=({contact:t})=>{const s=g(),a=h(c=>c.contacts),[r,x]=o.useState(t.alias??void 0),[u,i]=o.useState(0);o.useEffect(()=>{a.successUpdate==!1?n({variant:"flat",color:"danger",title:"Error",description:a.error}):a.successUpdate==!0&&(n({variant:"flat",color:"success",title:"Actualización exitosa",timeout:3e3}),s(m())),s(p())},[a.successUpdate]),o.useEffect(()=>{a.successDelete==!1?n({variant:"flat",color:"danger",title:"Error",description:a.error}):a.successDelete==!0&&(n({variant:"flat",color:"success",title:"Eliminación exitosa",timeout:3e3}),s(m())),s(p())},[a.successDelete]);const l=c=>{if(c.preventDefault(),!(!r||r.trim()==="")){var v={alias:r.trim()},w={id:t.id,body:v};s(N(w)),i(0)}};return u===0?e.jsxs(S,{isPressable:!0,className:"w-full px-2 py-3 flex flex-row justify-center items-center gap-3 hover:border-neutral-400 hover:border-1",onPress:()=>i(1),children:[e.jsx(d,{name:"FaUser",className:"text-slate-800",size:16}),e.jsx("span",{children:t.alias})]},t.id):u===1?e.jsxs("div",{className:"w-full h-12 flex flex-row gap-2",children:[e.jsx(f,{variant:"flat",color:"primary",className:"w-full min-w-12 h-full",onPress:()=>{i(2)},children:e.jsx(d,{name:"FaPen",className:"text-primary-500",size:16})}),e.jsx(f,{variant:"flat",color:"danger",className:"w-full min-w-12 h-full",onPress:()=>{s(b(t.id.toString()))},children:e.jsx(d,{name:"FaTrash",className:"text-rose-600",size:16})}),e.jsx(f,{variant:"flat",color:"default",className:"w-full min-w-12 h-full",onPress:()=>{i(0)},children:e.jsx("span",{className:"text-lg font-medium",children:"X"})})]}):e.jsxs("form",{onSubmit:l,className:"w-full h-12 flex flex-row gap-2",children:[e.jsx(j,{required:!0,size:"lg",className:"w-5/6",value:r,onChange:c=>x(c.target.value)}),e.jsx(f,{type:"submit",variant:"flat",color:"primary",className:"w-1/6 min-w-12 h-full",children:e.jsx(d,{name:"FaCheck",className:"text-primary-500",size:16})})]})},P=()=>{var u,i;const t=g(),s=h(l=>l.contacts),[a,r]=o.useState(void 0);o.useEffect(()=>{t(m())},[t]),o.useEffect(()=>{s.successStore==!1?n({variant:"flat",color:"danger",title:"Error",description:s.error}):s.successStore==!0&&(n({variant:"flat",color:"success",title:"Registro exitoso",timeout:3e3}),t(m())),t(p())},[s.successStore]);const x=l=>{if(l.preventDefault(),!(!a||a.trim()==="")){var c={alias:a.trim()};t(y(c)),r("")}};return s.loading?e.jsx("div",{className:"w-full lg:h-dscreen flex flex-col gap-y-6",children:"Loading..."}):e.jsxs("div",{className:"w-full lg:h-dscreen flex flex-col gap-y-6 pb-12",children:[e.jsxs("div",{className:"w-full flex flex-col lg:flex-row justify-between items-center gap-6",children:[e.jsx("span",{className:"font-semibold",children:"Cuentas y tarjetas"}),e.jsxs("form",{onSubmit:x,className:"w-full lg:w-auto flex flex-row gap-6",children:[e.jsx(j,{required:!0,className:"w-full lg:w-48",label:"Alias",labelPlacement:"outside-left",value:a,onChange:l=>r(l.target.value)}),e.jsx(f,{type:"submit",color:"primary",className:"",isLoading:s.loading,children:"Agregar"})]})]}),e.jsx("div",{className:"w-full grid grid-cols-1 lg:grid-cols-6 gap-6",children:((u=s.collection)==null?void 0:u.data)&&((i=s.collection)==null?void 0:i.data.map(l=>e.jsx(C,{contact:l},l.id)))})]})};export{P as default};
