import{u as le,a as se,r as l,b as V,i as re,c as M,d as H,j as a,e as L,s as U,f as v,g as G}from"./index-DKY2NX35.js";import{t as ne,c as oe,a as ie}from"./combos-D7eekNR2.js";import{s as g,l as c}from"./chunk-2GIFKCNQ-y7tds759.js";import{r as de,a as J}from"./chunk-6NGXL2PC-Ds8FGwlY.js";import{t as ce}from"./chunk-RIE4DNUQ-Ba9WOTQ8.js";const p="https://nimo-api.paulflores.site",ue=()=>{const i=le(),K=se(),[n,O]=l.useState(void 0),[h,f]=l.useState(void 0),[o,S]=l.useState(1),[b,T]=l.useState(void 0),[$,Q]=l.useState(void 0),[j,W]=l.useState(void 0),[u,X]=l.useState(void 0),[A,w]=l.useState(void 0),[y,Y]=l.useState(void 0),[I,k]=l.useState(void 0),[P,z]=l.useState(void 0),[q,N]=l.useState(void 0),[D,R]=l.useState(void 0),[E,F]=l.useState(void 0),{debit:m,credit:x,loading:Z,error:B}=V(e=>e.cards),d=V(e=>e.transactions),[C,ee]=l.useState(void 0),[_,ae]=l.useState(void 0);l.useEffect(()=>{i(re())},[i]),l.useEffect(()=>{if(d.storeSuccess===!1)M({variant:"flat",color:"danger",title:"Error",description:d.error}),i(H());else if(d.storeSuccess===!0){const e=d.data;M({variant:"flat",color:"success",title:"Registro exitoso",timeout:1e4,endContent:a.jsx(L,{onPress:()=>{e&&K("/dashboard/transaction",{state:{transaction:e}})},size:"lg",variant:"flat",children:"Detalle"})}),i(H())}},[d]);const te=e=>{if(e.preventDefault(),n!==3){if(k(n===void 0),z(h===void 0),N(b===void 0),I||P||q)return;const t={concept:$??"",amount:parseFloat(j??"0"),transaction_date:u??"",accounting_date:A??"",place:"",notes:y??"",category_id:h??0,type_id:n??0,card_id:b??0,second_card_id:void 0};i(G(t))}else{if(R(C===void 0),F(_===void 0),D||E)return;const t={concept:"Pago de TDC",amount:parseFloat(j??"0"),transaction_date:u??"",accounting_date:u??"",place:"",notes:y??"",category_id:10,type_id:3,card_id:C??0,second_card_id:_??0};i(G(t))}};return a.jsxs("form",{onSubmit:te,className:"w-full flex flex-col gap-y-6",children:[a.jsxs("div",{className:"w-full flex flex-col gap-y-6",children:[a.jsx("span",{className:"font-semibold text-left",children:"Registrar movimiento"}),a.jsx("span",{className:"font-medium text-center",children:"Información general"}),a.jsxs("div",{className:"w-full flex flex-col lg:flex-row gap-x-4 gap-y-6",children:[a.jsx(g,{required:!0,size:"lg",variant:"flat",label:"Tipo de movimiento",placeholder:"Tipo de movimiento",labelPlacement:"outside",value:n,color:I?"danger":"default",className:"w-full",onChange:e=>{O(parseInt(e.target.value)),k(e.target.value===void 0),parseInt(e.target.value)!==2?e.target.value==="3"?f(10):f(12):f(void 0),e.target.value==="1"&&o!==1&&(S(1),N(void 0))},children:ne.map(e=>a.jsx(c,{children:e.label},e.key))}),a.jsx(g,{required:!0,size:"lg",variant:"flat",label:"Categoría",labelPlacement:"outside",placeholder:"Categoría",value:h,color:P?"danger":void 0,onChange:e=>{f(parseInt(e.target.value)),z(e.target.value===void 0)},className:n!==2?"hidden":"w-full",children:oe.map(e=>a.jsx(c,{children:e.label},e.key))}),n!==3&&a.jsx(de,{size:"lg",label:"Tipo de tarjeta",orientation:"horizontal",value:o==null?void 0:o.toString(),onChange:e=>{const t=parseInt(e.target.value);S(t),T(void 0),t===1&&w(u)},className:"text-sm w-full",children:a.jsxs("div",{className:"flex w-full justify-start lg:justify-between space-x-6 lg:space-x-0",children:[n!==1&&ie.map(e=>a.jsx(J,{value:e.key.toString(),children:e.label},e.key)),n===1&&a.jsx(J,{value:"1",children:"Débito"},1)]})}),a.jsx("div",{className:"w-full",children:Z?a.jsxs("div",{className:"w-full h-16 flex flex-col justify-between",children:[a.jsx(U,{className:"w-12 h-4 rounded-xl",children:"a"}),a.jsx(U,{className:"w-full h-10 rounded-xl",children:"a"})]}):a.jsx(a.Fragment,{children:B!==null?a.jsx("div",{children:B}):n!==3?a.jsx(g,{required:!0,size:"lg",variant:"flat",label:"Tarjeta",labelPlacement:"outside",placeholder:"Tarjeta",value:b,color:q?"danger":void 0,className:"w-full",onChange:e=>{T(parseInt(e.target.value)),N(e.target.value===void 0)},children:o===1&&Array.isArray(m)?m.map(e=>{var t,s,r;return a.jsx(c,{endContent:a.jsx("div",{className:`p-2 w-10 max-h-6 flex flex-col justify-center items-center rounded-md ${((t=e.network)==null?void 0:t.name)==="Visa"?"bg-blue-700":"bg-gray-100"}`,children:a.jsx("img",{src:`${p}${(s=e.network)==null?void 0:s.img_path}`,alt:""})}),children:`${(r=e.bank)==null?void 0:r.name} ${e.numbers}`},e.id)}):o===2&&Array.isArray(x)?x.map(e=>{var t,s,r;return a.jsx(c,{endContent:a.jsx("div",{className:`p-2 w-10 max-h-6 flex flex-col justify-center items-center rounded-md ${((t=e.network)==null?void 0:t.name)==="Visa"?"bg-blue-700":"bg-gray-100"}`,children:a.jsx("img",{src:`${p}${(s=e.network)==null?void 0:s.img_path}`,alt:""})}),children:`${(r=e.bank)==null?void 0:r.name} ${e.numbers}`},e.id)}):null}):a.jsxs("div",{className:"w-full flex flex-col lg:flex-row gap-y-6 gap-x-4",children:[a.jsx(g,{required:!0,size:"lg",variant:"flat",label:"Tarjeta origen",labelPlacement:"outside",placeholder:"Tarjeta",value:C,color:D?"danger":void 0,className:"w-full",onChange:e=>{ee(parseInt(e.target.value)),R(e.target.value===void 0)},children:m&&m.map(e=>{var t,s,r;return a.jsx(c,{endContent:a.jsx("div",{className:`p-2 w-10 max-h-6 flex flex-col justify-center items-center rounded-md ${((t=e.network)==null?void 0:t.name)==="Visa"?"bg-blue-700":"bg-gray-200"}`,children:a.jsx("img",{src:`${p}${(s=e.network)==null?void 0:s.img_path}`,alt:""})}),children:`${(r=e.bank)==null?void 0:r.name} ${e.numbers}`},e.id)})}),a.jsx(g,{required:!0,size:"lg",variant:"flat",label:"Tarjeta destino",labelPlacement:"outside",placeholder:"Tarjeta",value:_,color:E?"danger":void 0,className:"w-full",onChange:e=>{ae(parseInt(e.target.value)),F(e.target.value===void 0)},children:x&&x.map(e=>{var t,s,r;return a.jsx(c,{endContent:a.jsx("div",{className:`p-2 w-10 max-h-6 flex flex-col justify-center items-center rounded-md ${((t=e.network)==null?void 0:t.name)==="Visa"?"bg-blue-700":"bg-gray-200"}`,children:a.jsx("img",{src:`${p}${(s=e.network)==null?void 0:s.img_path}`,alt:""})}),children:`${(r=e.bank)==null?void 0:r.name} ${e.numbers}`},e.id)})})]})})})]})]}),a.jsxs("div",{className:"w-full flex flex-col gap-y-6",children:[a.jsx("span",{className:"font-medium text-center",children:"Detalle"}),a.jsxs("div",{className:"w-full flex flex-col lg:flex-row gap-y-6 gap-x-4",children:[n!==3&&a.jsx(v,{required:!0,size:"lg",variant:"bordered",label:"Concepto",labelPlacement:"outside",placeholder:"Pago de Nómina",type:"text",value:$,onChange:e=>Q(e.target.value)}),a.jsxs("div",{className:"w-full flex flex-col lg:flex-row gap-y-6 gap-x-4",children:[a.jsx(v,{required:!0,size:"lg",variant:"bordered",label:"Monto",labelPlacement:"outside",placeholder:"20000",type:"number",inputMode:"decimal",startContent:"$",value:j,onChange:e=>W(e.target.value),className:"w-full lg:w-5/12"}),a.jsxs("div",{className:"w-full flex flex-row gap-x-4 justify-between",children:[a.jsx(v,{required:!0,size:"lg",variant:"bordered",label:"Fec. movimiento",labelPlacement:"outside",type:"date",value:u,onChange:e=>{X(e.target.value),o===1&&w(e.target.value)},className:`min-w-1 w-1/2 ${o===1?"pr-3":"pr-0"}`}),a.jsx(v,{required:!0,disabled:o===1,size:"lg",variant:"bordered",label:"Fec. contabilidad",labelPlacement:"outside",type:"date",value:A,onChange:e=>w(e.target.value),className:`min-w-1 w-1/2 ${o===1?"text-neutral-300 hidden":""}`})]})]})]}),a.jsx(ce,{size:"lg",variant:"bordered",label:"Notas",labelPlacement:"outside",placeholder:"Notas",type:"text",value:y,onChange:e=>Y(e.target.value)}),a.jsx(L,{size:"lg",type:"submit",variant:"solid",color:"primary",radius:"lg",className:"w-full lg:w-1/6",isLoading:d.loading,children:"Registrar"})]})]})},pe=()=>a.jsx("div",{className:"w-full lg:h-dscreen pb-12",children:a.jsx(ue,{})});export{pe as default};
