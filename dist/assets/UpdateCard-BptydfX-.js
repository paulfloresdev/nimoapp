import{u as W,a as X,h as Y,b as z,r as s,a5 as Z,c as n,a7 as _,j as e,s as B,D as E,f as q,e as D,a8 as ee,a9 as ae}from"./index-DKY2NX35.js";import{n as O}from"./combos-D7eekNR2.js";import{s as A,l as F}from"./chunk-2GIFKCNQ-y7tds759.js";const se="https://nimo-api.paulflores.site",oe=()=>{var b,N,k,y,S,C,I;const r=W(),f=X(),P=Y(),{card:t}=P.state,o=z(a=>a.banks),l=z(a=>a.cards),[R,te]=s.useState((b=t.type)==null?void 0:b.id),[i,T]=s.useState((N=t.bank)==null?void 0:N.id),[x,m]=s.useState(void 0),[U,L]=s.useState(!1),[c,p]=s.useState(!1),[g,h]=s.useState(void 0),[w,$]=s.useState(t.numbers??""),[G,H]=s.useState(!1),[d,v]=s.useState(!1),[j,J]=s.useState((t==null?void 0:t.color)??""),[u,K]=s.useState((k=t.network)==null?void 0:k.id);s.useEffect(()=>{r(Z())},[r]),s.useEffect(()=>{l.updateSuccess==!1?n({variant:"flat",color:"danger",title:"Error",description:l.error}):l.updateSuccess==!0&&(n({variant:"flat",color:"success",title:"Actualización exitosa",timeout:3e3}),f("/dashboard/cards")),r(_())},[l.updateSuccess]),s.useEffect(()=>{l.destroySuccess==!1?n({variant:"flat",color:"danger",title:"Error",description:l.error}):l.destroySuccess==!0&&(n({variant:"flat",color:"success",title:"Eliminación exitosa",timeout:3e3}),f("/dashboard/cards")),r(_())},[l.destroySuccess]);const M=a=>{if(a.preventDefault(),m(i===void 0),h(u===void 0),!(x||g)){var Q={numbers:w??"",color:j??"",type_id:R??0,bank_id:i??0,network_id:u??0},V={id:t.id.toString(),data:Q};r(ae(V))}};return e.jsxs("form",{onSubmit:M,className:"w-full lg:h-dscreen flex flex-col gap-y-6 pb-12",children:[e.jsx("span",{className:"font-semibold",children:"Actualizar tarjeta"}),e.jsxs("div",{className:"w-full flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"w-full lg:w-1/4 flex-col space-y-2",children:[e.jsx("span",{className:"text",children:"Tipo de tarjeta"}),e.jsx("div",{className:"w-full h-12 bg-neutral-100 px-3 py-2 rounded-xl text-slate-600 flex flex-row justify-between items-center",children:e.jsx("span",{className:"",children:((y=t.type)==null?void 0:y.type)==="DEBIT"?"Débito":"Crédito"})})]}),e.jsx(e.Fragment,{children:o.loading?e.jsxs("div",{className:"w-full lg:w-1/4 h-16 flex flex-col justify-between",children:[e.jsx(B,{className:"w-12 h-4 rounded-xl",children:"a"}),e.jsx(B,{className:"w-full h-10 rounded-xl",children:"a"})]}):e.jsx(e.Fragment,{children:U?e.jsx(A,{required:!0,size:"lg",variant:"flat",label:"Banco",labelPlacement:"outside",placeholder:"Banco",value:i,color:x?"danger":void 0,className:"w-full lg:w-1/4",isOpen:c,onOpenChange:a=>a!==c&&p(a),onChange:a=>{T(parseInt(a.target.value)),m(a.target.value===void 0)},children:o.data&&((S=o.data)==null?void 0:S.map(a=>e.jsx(F,{startContent:e.jsx("div",{className:"w-12 max-h-6 flex flex-col justify-center items-center rounded-md ",children:e.jsx("img",{src:`${se}${a.img_path}`,alt:"",className:"invert"})}),children:a.name},a.id)))}):e.jsxs("div",{className:"w-full lg:w-1/4 flex-col space-y-2",children:[e.jsx("span",{className:"text",children:"Banco"}),e.jsxs("div",{onClick:()=>{L(!0),p(!c)},className:"w-full h-12 bg-neutral-100 hover:bg-neutral-200 px-3 py-2 rounded-xl text-slate-600 flex flex-row justify-between items-center cursor-pointer",children:[e.jsx("span",{className:"",children:(C=t.bank)==null?void 0:C.name}),e.jsx(E,{name:"FaChevronDown",size:11})]})]})})}),G?e.jsx(A,{required:!0,size:"lg",variant:"flat",label:"Network",labelPlacement:"outside",placeholder:"Network",value:u,color:g?"danger":void 0,className:"w-full lg:w-1/4",isOpen:d,onOpenChange:a=>a!==d&&v(a),onChange:a=>{K(parseInt(a.target.value)),h(a.target.value===void 0)},children:O&&O.map(a=>e.jsx(F,{children:a.label},a.key))}):e.jsxs("div",{className:"w-full lg:w-1/4 flex-col space-y-2",children:[e.jsx("span",{className:"text",children:"Network"}),e.jsxs("div",{onClick:()=>{H(!0),v(!d)},className:"w-full h-12 bg-neutral-100 hover:bg-neutral-200 px-3 py-2 rounded-xl text-slate-600 flex flex-row justify-between items-center cursor-pointer",children:[e.jsx("span",{className:"",children:(I=t.network)==null?void 0:I.name}),e.jsx(E,{name:"FaChevronDown",size:11})]})]}),e.jsxs("div",{className:"w-full lg:w-1/4 flex flex-row gap-6",children:[e.jsx(q,{required:!0,size:"lg",variant:"flat",label:"4 últimos dígitos",labelPlacement:"outside",placeholder:"1234",value:w,onChange:a=>$(a.target.value),className:"w-2/3"}),e.jsx(q,{required:!0,size:"lg",variant:"flat",type:"color",label:"Color",labelPlacement:"outside",value:j,onChange:a=>J(a.target.value),className:"w-1/3"})]})]}),e.jsxs("div",{className:"w-full lg:w-1/3 flex flex-row gap-6 justify-center items-center",children:[e.jsx(D,{size:"lg",type:"submit",variant:"solid",color:"primary",radius:"lg",className:"w-full",isLoading:l.loading,children:"Actualizar"}),e.jsx(D,{size:"lg",variant:"solid",color:"danger",radius:"lg",className:"w-full",isLoading:l.loading,onPress:()=>r(ee(t.id.toString())),children:"Eliminar"})]})]})};export{oe as default};
